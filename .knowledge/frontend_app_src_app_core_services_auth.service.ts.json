{"is_source_file": true, "format": "TypeScript", "description": "This file defines the AuthService class responsible for handling authentication, including login, logout, token management, MFA, and password reset functions in an Angular application.", "external_files": ["@angular/core", "@angular/common/http", "./config.service", "@angular/router"], "external_methods": ["signal", "HttpClient.post", "localStorage.setItem", "localStorage.removeItem", "localStorage.getItem", "Router.navigate"], "published": ["AuthService", "LoginRequest", "LoginResponse"], "classes": [{"name": "AuthService", "description": "Service class managing user authentication, token storage, and authentication state."}], "methods": [{"name": "login(payload: LoginRequest) { login", "description": "Attempts login against backend auth endpoint with provided credentials.", "scope": "AuthService", "scopeKind": "class"}, {"name": "requestPasswordReset(email: string) { requestPasswordReset", "description": "Requests a password reset email for the specified email address.", "scope": "AuthService", "scopeKind": "class"}, {"name": "resetPassword(token: string, newPassword: string) { resetPassword", "description": "Resets the user's password using a provided token and new password.", "scope": "AuthService", "scopeKind": "class"}, {"name": "completeMfa(username: string, mfaCode: string) { completeMfa", "description": "Completes multi-factor authentication with username and MFA code.", "scope": "AuthService", "scopeKind": "class"}, {"name": "persistTokens(accessToken: string, refreshToken?: string) { persistTokens", "description": "Stores access and refresh tokens in local storage and updates auth state.", "scope": "AuthService", "scopeKind": "class"}, {"name": "logout() { logout", "description": "Clears tokens and navigates to login page to log out the user.", "scope": "AuthService", "scopeKind": "class"}, {"name": "getAccessToken(): string | null { getAccessToken", "description": "Retrieves the current access token from local storage, if available.", "scope": "AuthService", "scopeKind": "class"}, {"name": "getRefreshToken(): string | null { getRefreshToken", "description": "Retrieves the current refresh token from local storage, if available.", "scope": "AuthService", "scopeKind": "class"}, {"name": "hasToken(): boolean { hasToken", "description": "Checks if an access token exists in local storage indicating authenticated state.", "scope": "AuthService", "scopeKind": "class"}, {"name": "readonly isAuthenticatedSig = signal<boolean>(this.hasToken()); this", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}], "calls": ["this.config.apiBase", "this.http.post", "localStorage.setItem", "localStorage.removeItem", "localStorage.getItem", "this.router.navigate"], "search-terms": ["AuthService", "login", "token storage", "MFA", "Password reset", "auth state"], "state": 2, "file_id": 24, "knowledge_revision": 101, "git_revision": "", "revision_history": [{"48": ""}, {"86": ""}, {"87": ""}, {"98": ""}, {"101": ""}], "ctags": [{"_type": "tag", "name": "AuthService", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export class AuthService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "LoginRequest", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface LoginRequest {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "LoginResponse", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface LoginResponse {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "accessToken", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  accessToken: string;$/", "language": "TypeScript", "kind": "property", "scope": "LoginResponse", "scopeKind": "interface"}, {"_type": "tag", "name": "accessTokenKey", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  private readonly accessTokenKey = 'app_access_token';$/", "language": "TypeScript", "kind": "property", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "completeMfa", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  completeMfa(username: string, mfaCode: string) {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "getAccessToken", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  getAccessToken(): string | null {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "getRefreshToken", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  getRefreshToken(): string | null {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "hasToken", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  hasToken(): boolean {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "isAuthenticatedSig", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  readonly isAuthenticatedSig = signal<boolean>(this.hasToken());$/", "language": "TypeScript", "kind": "property", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "localStorage", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^declare const localStorage: any;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  login(payload: LoginRequest) {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  logout() {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "mfaCode", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  mfaCode?: string;$/", "language": "TypeScript", "kind": "property", "scope": "LoginRequest", "scopeKind": "interface"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  password: string;$/", "language": "TypeScript", "kind": "property", "scope": "LoginRequest", "scopeKind": "interface"}, {"_type": "tag", "name": "persistTokens", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  persistTokens(accessToken: string, refreshToken?: string) {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "refreshToken", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  refreshToken?: string;$/", "language": "TypeScript", "kind": "property", "scope": "LoginResponse", "scopeKind": "interface"}, {"_type": "tag", "name": "refreshTokenKey", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  private readonly refreshTokenKey = 'app_refresh_token';$/", "language": "TypeScript", "kind": "property", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "requestPasswordReset", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  requestPasswordReset(email: string) {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "requiresMfa", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  requiresMfa?: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "LoginResponse", "scopeKind": "interface"}, {"_type": "tag", "name": "resetPassword", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  resetPassword(token: string, newPassword: string) {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "this", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  readonly isAuthenticatedSig = signal<boolean>(this.hasToken());$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^    const url = `${this.config.apiBase}\\/auth\\/forgot`;$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.requestPasswordReset", "scopeKind": "method"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^    const url = `${this.config.apiBase}\\/auth\\/login`;$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.login", "scopeKind": "method"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^    const url = `${this.config.apiBase}\\/auth\\/mfa`;$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.completeMfa", "scopeKind": "method"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^    const url = `${this.config.apiBase}\\/auth\\/reset`;$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.resetPassword", "scopeKind": "method"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/unified-micro-front-end-framework-6530-6539/frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  username: string;$/", "language": "TypeScript", "kind": "property", "scope": "LoginRequest", "scopeKind": "interface"}], "hash": "e48a13603d152ec0917e34b2f5aaffbf", "format-version": 4, "code-base-name": "frontend_app", "filename": "frontend_app/src/app/core/services/auth.service.ts", "fields": [{"name": "export interface LoginRequest {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface LoginResponse {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "accessToken: string;", "scope": "LoginResponse", "scopeKind": "interface", "description": "unavailable"}, {"name": "private readonly accessTokenKey = 'app_access_token';", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}, {"name": "readonly isAuthenticatedSig = signal<boolean>(this.hasToken());", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}, {"name": "mfaCode?: string;", "scope": "LoginRequest", "scopeKind": "interface", "description": "unavailable"}, {"name": "password: string;", "scope": "LoginRequest", "scopeKind": "interface", "description": "unavailable"}, {"name": "refreshToken?: string;", "scope": "LoginResponse", "scopeKind": "interface", "description": "unavailable"}, {"name": "private readonly refreshTokenKey = 'app_refresh_token';", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}, {"name": "requiresMfa?: boolean;", "scope": "LoginResponse", "scopeKind": "interface", "description": "unavailable"}, {"name": "username: string;", "scope": "LoginRequest", "scopeKind": "interface", "description": "unavailable"}]}